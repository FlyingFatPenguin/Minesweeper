<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Minesweeper</title>
  <link rel="stylesheet" href="./Field.css">
</head>

<body>
  <h1>扫雷 原生 js 版</h1>
  <h2 id="state"></h2>
  <button onclick="restart()">重新开始</button>
  长：<input type="text" id="sizeX" value="5">
  宽：<input type="text" id="sizeY" value="5">
  雷：<input type="text" id="mineNum" value="5">

  <div id="test"></div>

  <script src="./Field.js"></script>
  <script>
    let field = new Field();
    let root = field.getDomRoot();
    let test = document.getElementById('test');
    test.appendChild(root)

    let inputX = document.getElementById('sizeX');
    let inputY = document.getElementById('sizeY');
    let inputMineNum = document.getElementById('mineNum');

    function restart() {
      let sizeX = parseInt(inputX.value);
      let sizeY = parseInt(inputY.value);
      let mineNum = parseInt(inputMineNum.value);
      field.init(sizeX, sizeY, mineNum);
    }

    restart();

    let stateText = document.getElementById('state');
    field.whenInit = function(){
      console.log('whenInit');
      stateText.innerHTML = '初始化';
    };
    field.whenFailure = function(){
      console.log('whenFailure');
      stateText.innerHTML = '失败';
    };
    field.whenSuccess = function(){
      console.log('whenSuccess');
      stateText.innerHTML = '成功';
    };
    field.whenFinish = function(){
      console.log('whenFinish');
      stateText.innerHTML += 'GameOver';
    };

    (function (doc, win) {
      var docEle = doc.documentElement,
        evt = "onorientationchange" in window ? "orientationchange" : "resize",
        fn = function () {
          var width = docEle.clientWidth;
          width && (docEle.style.fontSize = (width / 40) + "px");
        };

      win.addEventListener(evt, fn, false);
      doc.addEventListener("DOMContentLoaded", fn, false);

    }(document, window));
  </script>
</body>

</html>